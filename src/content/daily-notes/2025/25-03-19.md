---
title: 25 03 19
date: '2025-12-27'
category: Daily Notes
tags: []
excerpt: "용우\n- 복구율에 대한 재정의 필요\n\t- 리드 솔로몬을 패리티를 무한으로 만들면 당연히 올라가지만 스토리지 비용 증가\n\n서규\n- 3개 복제 -> 복구 가능성 3배\n\t- 이레이저 코딩을 활용하면 1.5배 저장공간만  사용해도 복구 가능성 3배 도달 가능\n- 지향점이 D..."
---

용우
- 복구율에 대한 재정의 필요
	- 리드 솔로몬을 패리티를 무한으로 만들면 당연히 올라가지만 스토리지 비용 증가

서규
- 3개 복제 -> 복구 가능성 3배
	- 이레이저 코딩을 활용하면 1.5배 저장공간만  사용해도 복구 가능성 3배 도달 가능
- 지향점이 DB인지 Object Storage인지 불명확




Offchain 저장소 데이터 분산 전략

1. 목표
	1. K개의 원본 복제를 하는 것 대비 저장공간 효율화방안 제시
	2. 단일 노드 침해시 원본이 복구 불가능 하도록 하는 방안 제시
2. 전제
	1. 노드갯수: K, 총샤드: 2K, 데이터 샤드 갯수: K, 패리티 샤드: K, 복구를위한최소갯수: K
	2. K=10, M=10
		1. 한 노드당 최소 2개 이상의 조각을 갖기 위해 설정한 값
		2. 추후 최적값을 찾기 위해서는 데이터의 크기를 고려해서 노드별로 관리할 데이터 크기를 설정해야하고, 노드별로 관리할 수 있는 데이터 총량도 이에 비례할 것으로 보임
	3. 각 노드는 데이터샤드1개, 패리티샤드1개 가진다
3. 사용한 알고리즘 설명
	1. reed-solomon: 단독으로 사용했고, 위조/변조 탐지는 checksum 검증으로 대체
4. 구현안
	1. 데이터 저장 흐름
			1. K+M encoding
			2. 각 노드에 각1개씩 전달할 때 체크섬은 마스터노드 메타데이터로 관리
			3. 저장 완료처리
	2. 데이터 메타데이터 관리 흐름 (WIP)
		1. checksum 등의 데이터 관리 방안 설계 필요
	3. 데이터 조회 흐름
		1. 모든 노드에 요청
		2. 원본 응답 체크섬 검증
		3. 정상데이터면 응답
		4. 체크섬 검증 실패시 패리티 체크섬 검증
		5. 통과시에 패리티 이용해서 데이터 복구
5. 결론
	1. 데이터 기준 K=10개의 유실에도 복원가능
	2. 노드 기준 5개 노드의 불능상태에도 복원 가능
6. 추가 논의 사항
	1. 복구가능성 향상 vs 데이터 보안 문제
	2. 데이터 원본을 전체적으로 리드솔로몬 인코딩 후 샤드 분배 vs 스트라이핑 후 개별 블록 단위로 리드솔로몬 인코딩 후 샤드 분배 비교



일부만 참여한다
워커노드에 메타데이터(셀에 대한 메타데이터, 원본의 해시)
