---
title: 25 03 05
date: '2025-12-27'
category: Daily Notes
tags: []
excerpt: "옵시디언이 생각보다 유용하다. \ngit과 excalidraw, minimal plugin을 설치함\ngit에서 자동 동기화를 설정하니까 내가 일일히 커밋과 푸시를 진행하지 않아도 1분마다 알아서 동기화를 해준다.\n\n\n용우님과 오전 미팅 노트\n- 신뢰성\n\t- 컨소시엄이면..."
---

옵시디언이 생각보다 유용하다. 
git과 excalidraw, minimal plugin을 설치함
git에서 자동 동기화를 설정하니까 내가 일일히 커밋과 푸시를 진행하지 않아도 1분마다 알아서 동기화를 해준다.


용우님과 오전 미팅 노트
- 신뢰성
	- 컨소시엄이면 밸리데이터 노드가 누군지 알기 때문에 식별이 자유로움 그래서 일부 신뢰가 가능
	- 퍼블릭은 이 문제를 보상책으로 다루게 됨
- 실시간성
	- 데이터의 상태를 3단계로 구분해서 합의에 대한 절충이 필요함
- 여러 워커가 합의를 하는 방법
	- 1~5 데이터가 들어왔다는 상황
	- 1번 노드는 1,2,3을 올리고 다음 사이클에 4,5
	- 2번 노드는 1,2,3,4를 올리고 
	- 3번 노드는 1,2 만 올리고
	- 이 상황을 해결하기 위해서 epoch을 도입 (timestamp 기반 또는 다른 sequencing)
	- 배치 단위를 epoch로 하든지 버전을 도입해서 루트 해시를 서로 비교할 수 있음
		- 버전으로 하면 리더노드가 필요하고 리더노드가 제출하면 투표를 진행하는 것
			- 리더노드 선출이 따로 있는건 아니고, 리더노드가 잘못된 데이터를 제출하였다면 
		- 시간으로 하면 모두가 동일한 주기로 트랜잭션 제출하는 구조
	- API가 여러 협력사에서 존재한다면 현재 설계에서는 API가 sequence number를 부여하기 때문에 시퀀싱 문제가 존재하긴 함
	- API도 탈중앙화 하고 싶으면 시퀀스 관리를 탈중앙화 해야함


Service Map of Offchain DB System
- DI Container
	- 모든 Application이 각 모듈을 필요로 하는 것은 아니다
	- **각 Application별로 필요한 모듈만 사용하도록 수정**
- provideEcho
	- **datadog tracer & middleware 사용안하고 있기 때문에 fade-out 가능**
- grpc.NewServer
	- acquireUriLock등의 middleware를 application에서 주입할 수 있도록 수정이 필요
		- data-api, offchain-db-api
	- **grpc.NewServer의 다른 버전을 만들어서 URI locking을 가지는 구현체를 주입하도록 하면 심플할 것 같음**
- provideStellarConnector
	- **SDK는 걷어내고 api client는 직접 개발하는 것으로 진행**
	- Stellar Transaction Generator API 의 변경이 최소화 될 수 있는지 휘님과 이야기
- Account API
	- skip
- Account Contract
	- skip
- Data API
	- permission check
		- data read & write & delete 서명 검증이 이뤄지고 있음
		- 항상 smart contract의 view function에 의존하고 있는 부분
		- signed_at이 signature 생성할 때 들어가는지 다시 확인



Offchain DB 저장소의 탈중앙화 방법론 리서치 미팅
- public하게 오픈했을 때 validator를 처벌할 수 있는 방법?
- 분산은 O, replica는 X
- 합의를 거쳐서 복제를 함
- 합의 알고리즘을 도입하는 것은 비용이 너무 크고
- 이 부분 보다는 사용자 데이터 주권 먼저 고려
	- 사용자만 데이터를 핸들링할 수 있고 우리는 할 수 없는 방법 조사 필요
	- 데이터 분산 저장은 탈중앙 관점의 논의, 데이터 주권과는 무관
	- 키관리와 맞물리면 100% 달성은 어려울 수 있으나 최대한
- 암호화해서 저장하는 것은 RDB로도 할 수 있음
	- 암호화할 것인지는 데이터의 성격에 따라서 결정할 것이고 데이터 주권이랑은 무관
- Web2, Web3 계정 추상화 문제와 관련이 있음
- 분산 저장 스펙에 대해서 PoC를 진행할 수 있도록 발전시키고 정리
	- 데이터 주권은 위 문제 먼저 확인하고 고민

미팅 후 Wrap up
- 이레이저 코딩이 아닐까?
- 조사해보고 다시 이야기


이레이저 코딩
- 리드 솔로몬 원리는 분산 DB에서 많이 사용되고 있음
- 이레이저 코딩과 RAID는 패리티 갯수를 지정할 수 있다는 측면에서 다름
	- 참고: https://frostflower-note.tistory.com/23
- shamir secrets sharing도 사용하고 있다고 함
- 구현체
	- Go: https://github.com/klauspost/reedsolomon/tree/master
